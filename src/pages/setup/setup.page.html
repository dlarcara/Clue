<ion-content>
    <ion-segment [(ngModel)]="setupStep" color="primary">
        <ion-segment-button value="1" sele>Players</ion-segment-button>
        <ion-segment-button value="2">Details</ion-segment-button>    
        <ion-segment-button value="3">Cards</ion-segment-button>
        <ion-segment-button value="4">Review</ion-segment-button>
    </ion-segment>

    <!-- List of validations -->
    <ion-card>
        <ion-list>
            <ion-item *ngIf="setupStep == 1 || setupStep == 4">
                <ion-icon name="checkmark-circle" color="{{isPlayerCountValid() ? 'valid' : 'invalid'}}" item-left></ion-icon>
                3+ players selected
            </ion-item>
            <ion-item *ngIf="setupStep == 1 || setupStep == 4">
                <ion-icon name="checkmark-circle" color="{{arePlayerNamesValid() ? 'valid' : 'invalid'}}" item-left></ion-icon>
                All players given a name
            </ion-item>     
            <ion-item *ngIf="setupStep == 2 || setupStep == 4">
                <ion-icon name="checkmark-circle" color="valid" item-left></ion-icon>
                You're playing as {{detective.suspect.friendlyName}}
            </ion-item>
            <ion-item *ngIf="setupStep == 2 || setupStep == 4">
                <ion-icon name="checkmark-circle" color="valid" item-left></ion-icon>
                2 players with extra cards identified
            </ion-item>   
            <ion-item *ngIf="setupStep == 3 || setupStep == 4">
                <ion-icon name="checkmark-circle" color="valid" item-left></ion-icon>
                Mark your 7 cards
            </ion-item> 
        </ion-list>

        <button ion-button *ngIf="setupStep == 4" full>Start Game</button>
    </ion-card>

    <ion-card  *ngIf="setupStep != 4">
        <!-- Step 1 & 2 - Players, Names, Extra Cards, Order -->
        <ion-list [reorder]="setupStep == 2" radio-group [(ngModel)]="detective" (ionItemReorder)="reorderItems($event)" *ngIf="setupStep != 3" no-lines>
            <ion-item *ngFor="let player of getPlayersToDisplayBasedOnSetupStep(setupStep)">
                <img item-left src="{{player.suspect.icon}}" class="game-card-icon" />

                <!-- Step 1: Players -->
                <ion-input type="text" [(ngModel)]="player.name" name="playerName" [placeholder]="player.suspect.friendlyName" [disabled]="!player.isPlaying" *ngIf="setupStep == 1"></ion-input>
                <ion-toggle item-right [(ngModel)]="player.isPlaying" *ngIf="setupStep == 1"></ion-toggle>

                <!-- Step 2: Detective, Extra Cards, Order -->
                <ion-label *ngIf="setupStep == 2">{{player.name}}</ion-label>
                <ion-radio item-right [value]="player" [checked]="playerIsDetective(player)" [disabled]="!player.isPlaying" *ngIf="setupStep == 2"></ion-radio>
                <ion-toggle item-right [(ngModel)]="player.extraCard" *ngIf="setupStep == 2"></ion-toggle>
            </ion-item>
        </ion-list>

        <!-- Step 3: Detective Cards -->
        <ion-list *ngIf="setupStep == 3">
            <ion-item-group *ngFor="let cardsForCategory of allCardsByCategory">
                <ion-item-divider color="light">{{cardsForCategory.category}}</ion-item-divider>
                
                <ion-item *ngFor="let card of cardsForCategory.cards">
                    <img item-left src="{{card.icon}}" class="game-card-icon" />

                    <ion-label>{{card.friendlyName}}</ion-label>
                    <ion-checkbox item-right></ion-checkbox>
                </ion-item>
            </ion-item-group>
        </ion-list>
    </ion-card>
</ion-content>